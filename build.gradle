/**
 * Author: ngoanh2n
 */
buildscript {
    apply {
        from(file("gradle/global.gradle"))
        from(file("gradle/helpers.gradle"))
    }
}

allprojects {
    group(property("artifact.group"))
    version(property("artifact.version"))

    repositories {
        mavenCentral()
        maven { url("https://plugins.gradle.org/m2/") }
    }
}

subprojects {
    apply {
        plugin("java")
        plugin("base")
        plugin("idea")
        plugin("signing")
        plugin("java-library")
        plugin("maven-publish")
    }

    apply from: rootProject.file("gradle/compilation.gradle")
    apply from: rootProject.file("gradle/publication.gradle")
    apply from: rootProject.file("gradle/dependencies.gradle")

    tasks.clean.doFirst {
        delete project.file("out")
        delete rootProject.files("build")
    }

    tasks.build.configure {
        dependsOn.removeIf { task -> (task == "check") }
        assemble.dependsOn("clean")
        dependsOn("publishToMavenLocal")
    }
}
