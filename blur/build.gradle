/**
 * Author: ngoanh2n
 */
plugins {
    id("io.qameta.allure") version "2.11.2"
    id("io.freefair.aspectj.post-compile-weaving") version "8.0.1"
}

dependencies {
    api("com.codeborne:selenide:$versionSelenide")
    api("io.appium:java-client:$versionAppiumClient")

    api("com.github.ngoanh2n:commons:$versionCommons")
    api("com.github.ngoanh2n:csv-comparator:$versionCsvComparator")
    api("com.github.ngoanh2n:image-comparator:$versionImageComparator")
    api("com.github.ngoanh2n:webdriverchecker:$versionWebDriverChecker")
    api("com.github.ngoanh2n:webdrivershooter:$versionWebDriverShooter")
    api("com.github.ngoanh2n:webdriverchecker-selenide:$versionWebDriverChecker")
    api("com.github.ngoanh2n:webdrivershooter-selenide:$versionWebDriverShooter")

    implementation("com.github.ngoanh2n:commons-junit5:$versionCommons")
    implementation("com.github.ngoanh2n:commons-allure:$versionCommons")
    implementation("com.github.ngoanh2n:csv-comparator-allure:$versionCsvComparator")
    implementation("com.github.ngoanh2n:image-comparator-allure:$versionImageComparator")

    implementation("org.aspectj:aspectjrt:$versionAspectJ")
    implementation("org.aspectj:aspectjweaver:$versionAspectJ")

    implementation("io.qameta.allure:allure-junit5:$versionAllure")
    implementation("io.qameta.allure:allure-selenide:$versionAllure")
}

allure {
    version = "$versionAllure"
    adapter {
        aspectjWeaver = true
        aspectjVersion = "$versionAspectJ"
        autoconfigureListeners = true

        frameworks {
            junit5 {
                enabled = true
                autoconfigureListeners = true
            }
        }
    }
    report {
        reportDir = layout.buildDirectory.dir("allure")
    }
}
